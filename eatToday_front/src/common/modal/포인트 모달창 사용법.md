# 📌 포인트 모달 사용 가이드

## 🎯 간단 설명
활동 완료 시 자동으로 포인트 획득 모달을 띄우는 컴포넌트입니다.

---

## 🚀 빠른 사용법 (3단계)

### 1️⃣ Import 하기
```vue
<script setup>
import PointEarnedModal from '@/common/modal/PointEarnedModal.vue'
import { POINT_POLICY } from '@/common/constants/pointPolicy'

const showPointModal = ref(false)
</script>
```

### 2️⃣ 모달 컴포넌트 추가하기
```vue
<template>
  <div>
    <!-- 본문 내용 -->
    
    <!-- 포인트 모달 (템플릿 맨 아래에 추가) -->
    <PointEarnedModal 
      :visible="showPointModal"
      :description="POINT_POLICY.POST_CREATE.description"
      :points="POINT_POLICY.POST_CREATE.points"
      @close="showPointModal = false"
    />
  </div>
</template>
```

### 3️⃣ 원하는 시점에 모달 띄우기
```javascript
// 예: 게시물 작성 성공 후
async function submitPost() {
  try {
    await createPost(postData)
    showPointModal.value = true  // 👈 여기!
  } catch (error) {
    console.error(error)
  }
}
```

---

## 📋 포인트 정책 종류

| 활동 | 상수명 | 점수 | 설명 |
|------|--------|------|------|
| 로그인 | `POINT_POLICY.LOGIN` | 30 | 로그인 |
| 게시물 등록 | `POINT_POLICY.POST_CREATE` | 50 | 게시물 등록 |
| 댓글 작성 | `POINT_POLICY.COMMENT_CREATE` | 5 | 댓글 작성 |
| 술BTI 참여 | `POINT_POLICY.ALBTI_PARTICIPATE` | 10 | 술BTI 이벤트 참여 |
| 월드컵 참여 | `POINT_POLICY.WORLDCUP_PARTICIPATE` | 10 | 월드컵 게임 참여 |
| 사진 리뷰 작성 | `POINT_POLICY.PHOTO_REVIEW_CREATE` | 25 | 사진 리뷰 작성 |

---

## 💡 실제 사용 예제

### 예제 1: 게시물 작성 완료 시
```vue
<script setup>
import { ref } from 'vue'
import PointEarnedModal from '@/common/modal/PointEarnedModal.vue'
import { POINT_POLICY } from '@/common/constants/pointPolicy'

const showPointModal = ref(false)

async function createPost() {
  // API 호출
  await postApi.createPost(formData)
  
  // 포인트 모달 표시
  showPointModal.value = true
}
</script>

<template>
  <div>
    <button @click="createPost">게시물 작성</button>
    
    <PointEarnedModal 
      :visible="showPointModal"
      :description="POINT_POLICY.POST_CREATE.description"
      :points="POINT_POLICY.POST_CREATE.points"
      @close="showPointModal = false"
    />
  </div>
</template>
```

### 예제 2: 댓글 작성 완료 시
```vue
<script setup>
import { ref } from 'vue'
import PointEarnedModal from '@/common/modal/PointEarnedModal.vue'
import { POINT_POLICY } from '@/common/constants/pointPolicy'

const showPointModal = ref(false)

async function submitComment() {
  await commentApi.createComment(commentData)
  showPointModal.value = true  // 포인트 모달
}
</script>

<template>
  <div>
    <!-- 댓글 입력 폼 -->
    
    <PointEarnedModal 
      :visible="showPointModal"
      :description="POINT_POLICY.COMMENT_CREATE.description"
      :points="POINT_POLICY.COMMENT_CREATE.points"
      @close="showPointModal = false"
    />
  </div>
</template>
```

### 예제 3: 이벤트(술BTI, 월드컵) 참여 완료 시
```vue
<script setup>
import { ref } from 'vue'
import PointEarnedModal from '@/common/modal/PointEarnedModal.vue'
import { POINT_POLICY } from '@/common/constants/pointPolicy'

const showPointModal = ref(false)

function completeAlbti() {
  // 이벤트 결과 전송
  submitAlbtiResult(result)
  
  // 포인트 모달 (자동으로 2.5초 후 닫힘)
  showPointModal.value = true
}
</script>

<template>
  <div>
    <!-- 이벤트 UI -->
    
    <PointEarnedModal 
      :visible="showPointModal"
      :description="POINT_POLICY.ALBTI_PARTICIPATE.description"
      :points="POINT_POLICY.ALBTI_PARTICIPATE.points"
      @close="showPointModal = false"
      :auto-close="true"
      :auto-close-delay="2500"
    />
  </div>
</template>
```

### 예제 4: 로그인 성공 시 (이미 구현됨)
```vue
// src/views/member/Login.vue 참고
// 로그인 성공 후 자동으로 포인트 모달 표시
showPointModal.value = true
```

---




## ✅ 체크리스트

이미 구현된 것:
- [x] 로그인 시 포인트 모달 (Login.vue)

구현해야 할 것:
- [ ] 게시물 작성 완료 시
- [ ] 댓글 작성 완료 시
- [ ] 술BTI 참여 완료 시
- [ ] 월드컵 참여 완료 시
- [ ] 사진 리뷰 작성 완료 시

---

## 🆘 문제 해결

### 모달이 안 뜨는 경우
1. `showPointModal.value = true` 를 올바른 위치에 넣었는지 확인
2. API 호출이 성공한 후에 모달을 띄우는지 확인

### 모달이 계속 떠있는 경우
1. `@close` 이벤트 핸들러에 `showPointModal.value = false` 를 넣었는지 확인

### 포인트가 안 맞는 경우
1. `POINT_POLICY` 상수를 올바르게 사용했는지 확인
2. 백엔드와 프론트엔드 점수가 동일한지 확인

---
